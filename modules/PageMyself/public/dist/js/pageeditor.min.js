'use strict';

function _defineProperty(obj, key, value) { if (key in obj) { Object.defineProperty(obj, key, { value: value, enumerable: true, configurable: true, writable: true }); } else { obj[key] = value; } return obj; }

class PageMyselfPageEditor {
  /**
   * @type {Cash}
   */

  /**
   * @type {Cash}
   */

  /**
   * @type {Cash}
   */

  /**
   * @type {Window}
   */

  /**
   * @type {Document}
   */

  /**
   * @type {Cash}
   */

  /**
   * Late init
   */
  static initLate() {
    PageMyselfPageEditor.frame = $('.pageeditor-frame');
    PageMyselfPageEditor.frameTop = $('.pageeditor-frame-top');
    PageMyselfPageEditor.frameBottom = $('.pageeditor-frame-bottom');
    $('.pageeditor-frame iframe').on('load', function () {
      PageMyselfPageEditor.onIframeLoad();
    });
    PageMyselfPageEditor.updateFrameSize();
    $(window).on('resize', function () {
      PageMyselfPageEditor.updateFrameSize();
    });
  }
  /**
   * On iframe load
   */


  static onIframeLoad() {
    PageMyselfPageEditor.iframeWindow = $('.pageeditor-frame iframe')[0].contentWindow;
    PageMyselfPageEditor.iframeDoc = PageMyselfPageEditor.iframeWindow.document;
    PageMyselfPageEditor.iframeHtml = $(PageMyselfPageEditor.iframeDoc).find('html').first();
    PageMyselfPageEditor.frame.attr('data-page', PageMyselfPageEditor.iframeHtml.attr('data-page'));
  }
  /**
   * Update frame size
   */


  static updateFrameSize() {
    const frame = $('.pageeditor-frame');
    let reduceHeight = frame.offset().top + 150 + $('.pageeditor-frame-bottom').height();
    frame.height(window.innerHeight - reduceHeight);
  }

}

_defineProperty(PageMyselfPageEditor, "frame", void 0);

_defineProperty(PageMyselfPageEditor, "frameTop", void 0);

_defineProperty(PageMyselfPageEditor, "frameBottom", void 0);

_defineProperty(PageMyselfPageEditor, "iframeWindow", void 0);

_defineProperty(PageMyselfPageEditor, "iframeDoc", void 0);

_defineProperty(PageMyselfPageEditor, "iframeHtml", void 0);

FramelixInit.late.push(PageMyselfPageEditor.initLate);